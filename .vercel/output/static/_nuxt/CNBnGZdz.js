import{_ as j,a as U}from"./HE5pMjyY.js";import{u as F,_ as N}from"./BbN7t7o_.js";import{A as T,i as v,f as B,h as x,B as I,g as u,c as l,a as t,b as p,u as e,F as w,r as y,t as i,s as S,l as $,v as D,n as M,o as c}from"./DpY7Jxqy.js";import"./BcNGlyYo.js";const P={class:"project-page"},V={class:"project-header pt-5"},z={class:"container mx-auto relative"},E={class:"container project-container mx-auto -mt-56"},O={class:"flex mt-3"},W={class:"w-3/4 mr-6"},q={class:"bg-white p-3 mb-3 border border-gray-400 rounded-20"},G={class:"item-image"},H=["src"],J={class:"flex -mx-2"},K={class:"item-thumbnail cursor-pointer"},Q=["src","onClick"],X={class:"w-1/4"},Y={class:"bg-white w-full p-5 border border-gray-400 rounded-20 sticky",style:{top:"15px"}},Z=t("h3",null,"Project Leader:",-1),tt={class:"flex mt-3"},et={class:"w-1/4"},ot=["src"],st={class:"w-3/4 ml-5 mt-1"},nt={class:"font-semibold text-xl text-gray-800"},at={class:"font-light text-md text-gray-400"},it=t("h4",{class:"mt-5 font-semibold"},"What will you get:",-1),lt={class:"list-check mt-3"},ct=t("button",{type:"submit",class:"text-center mt-3 button-cta block w-full bg-orange-button hover:bg-green-button text-white font-medium px-6 py-3 text-md rounded-full"}," Fund Now ",-1),rt={class:"container mx-auto pt-8"},ut={class:"flex justify-between items-center"},dt={class:"w-full md:w-3/4 mr-6"},mt={class:"text-4xl text-gray-900 mb-2 font-medium"},_t={class:"font-light text-xl mb-5"},ht={class:"relative progress-bar"},pt={class:"overflow-hidden mb-4 text-xs flex rounded-full bg-gray-200 h-6"},gt={class:"flex progress-info mb-6"},bt={class:"text-2xl"},ft={class:"ml-auto font-semibold text-2xl"},vt={class:"font-light text-xl mb-5"},xt=t("div",{class:"w-1/4 hidden md:block"},null,-1),wt=t("div",{class:"cta-clip -mt-20"},null,-1),jt={__name:"[id]",async setup(yt){let d,g;const k=T(),{status:b}=v(),{data:m}=v(),f=k.params.id,{data:o}=([d,g]=B(()=>F("campaign",()=>fetch("http://localhost:8080/api/v1/campaigns/"+f,{baseURL:u().public.baseURL}).then(s=>s.json()))),d=await d,g(),d);console.log(o.value.data);const h=x(""),_=x({amount:"",campaign_id:Number.parseInt(f)}),R=async()=>{var s;try{if(b.value!=="authenticated"){console.error("Pengguna belum login.");return}const n=(s=m==null?void 0:m.value)==null?void 0:s.accessToken;if(!n){console.error("AccessToken tidak ditemukan, pengguna belum login.");return}const r=await $fetch("http://localhost:8080/api/v1/transactions",{method:"POST",body:{amount:_.value.amount,campaign_id:_.value.campaign_id},headers:{Authorization:`Bearer ${n}`}});r.data.payment_url&&(window.location=r.data.payment_url),console.log(r)}catch(n){console.log("error: ",n)}};console.log("access token:: ",m.value.accessToken);const C=s=>{h.value=s};return I(()=>{o.value&&o.value.data.image_url&&(h.value=u().public.baseURL+"/"+o.value.data.image_url)}),(s,n)=>{const r=j,A=N,L=U;return c(),l("div",P,[t("section",V,[t("div",z,[p(r)])]),t("section",E,[t("div",O,[t("div",W,[t("div",q,[t("figure",G,[t("img",{src:e(h),alt:"",class:"rounded-20 w-full"},null,8,H)])]),t("div",J,[(c(!0),l(w,null,y(e(o).data.images,a=>(c(),l("div",{key:a.image_url,class:"relative w-1/4 bg-white m-2 p-2 border border-gray-400 rounded-20"},[t("figure",K,[t("img",{src:("useRuntimeConfig"in s?s.useRuntimeConfig:e(u))().public.baseURL+"/"+a.image_url,onClick:kt=>C(("useRuntimeConfig"in s?s.useRuntimeConfig:e(u))().public.baseURL+"/"+a.image_url),alt:"",class:"rounded-20 w-full"},null,8,Q)])]))),128))])]),t("div",X,[t("div",Y,[Z,t("div",tt,[t("div",et,[t("img",{src:("useRuntimeConfig"in s?s.useRuntimeConfig:e(u))().public.baseURL+"/"+e(o).data.user.image_url,alt:"",class:"w-full inline-block rounded-full"},null,8,ot)]),t("div",st,[t("div",nt,i(e(o).data.user.name),1),t("div",at,i(e(o).data.backer_count),1)])]),it,t("ul",lt,[(c(!0),l(w,null,y(e(o).data.perks,a=>(c(),l("li",{key:a},i(a),1))),128))]),e(b)==="authenticated"?(c(),l("form",{key:0,onSubmit:S(R,["prevent"])},[$(t("input",{type:"number",class:"border border-gray-500 block w-full px-6 py-3 mt-4 rounded-full text-gray-800 transition duration-300 ease-in-out focus:outline-none focus:shadow-outline",placeholder:"Amount in Rp","onUpdate:modelValue":n[0]||(n[0]=a=>e(_).amount=a)},null,512),[[D,e(_).amount,void 0,{number:!0}]]),ct],32)):(c(),l("button",{key:1,onClick:n[1]||(n[1]=a=>s.$router.push({path:"/login"})),class:"mt-3 button-cta block w-full bg-orange-button hover:bg-green-button text-white font-medium px-6 py-3 text-md rounded-full"}," Sign in to Fund "))])])])]),t("section",rt,[t("div",ut,[t("div",dt,[t("h2",mt,i(e(o).data.name),1),t("p",_t,i(e(o).data.short_description),1),t("div",ht,[t("div",pt,[t("div",{style:M("width: "+e(o).data.current_amount/e(o).data.goal_amount*100+"%"),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-purple-progress progress-striped"},null,4)])]),t("div",gt,[t("div",bt,i(e(o).data.current_amount/e(o).data.goal_amount*100)+"% ",1),t("div",ft," Rp. "+i(new Intl.NumberFormat().format(e(o).data.goal_amount)),1)]),t("p",vt,i(e(o).data.description),1)]),xt])]),wt,p(A),p(L)])}}};export{jt as default};
