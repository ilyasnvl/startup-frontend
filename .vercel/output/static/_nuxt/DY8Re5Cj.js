import{p as g,x as v,h as i,i as b,c as m,a as e,u,t as _,o as x}from"./DpY7Jxqy.js";const w=g("/icon-avatar-add.svg"),k={class:"container mx-auto h-screen flex justify-center items-center"},y={class:"w-full lg:w-1/3 px-10 lg:px-0"},A={class:"flex justify-center items-center mx-auto mb-4 w-40"},U={class:"relative"},R={href:"#"},j=["src"],B=e("img",{src:w,alt:"add avatar icon",class:"absolute right-0 bottom-0 pb-2"},null,-1),C={class:"font-normal mb-3 text-3xl text-white text-center"},S=e("p",{class:"text-white text-center font-light"}," Please upload your selfie ",-1),F={__name:"upload",setup(T){const o=v(),c=i(""),l=i(null),d=o.currentRoute.value.query.name,{data:r}=b(),p=s=>{const t=s.target.files[0];t&&(l.value=t,c.value=URL.createObjectURL(t))},h=async()=>{var t;if(!l.value){alert("Please select an avatar before uploading.");return}const s=new FormData;s.append("avatar",l.value);try{const a=(t=r==null?void 0:r.value)==null?void 0:t.accessToken;a?console.log("AccessToken:",a):console.error("AccessToken tidak ditemukan, pengguna belum login.");const n=await $fetch("http://localhost:8080/api/v1/avatars",{method:"POST",body:s,headers:{Authorization:`Bearer ${a}`}});n.meta.status==="success"?(console.log("Avatar uploaded successfully"),await o.push({path:"/register-success"})):console.error("Avatar upload failed:",n.message)}catch(a){console.error("Upload error:",a)}},f=()=>{o.push({path:"/register-success"})};return(s,t)=>(x(),m("div",k,[e("div",y,[e("div",A,[e("div",U,[e("a",R,[e("img",{src:u(c)||"/avatar.jpg",alt:"avatar",class:"rounded-full border-white border-4"},null,8,j),B]),e("input",{type:"file",onChange:p,class:"absolute inset-0 opacity-0 cursor-pointer"},null,32)])]),e("h2",C," Hi, "+_(u(d)),1),S,e("div",{class:"mb-4 mt-6"},[e("div",{class:"mb-3"},[e("button",{onClick:h,class:"block w-full bg-orange-button hover:bg-green-button text-white font-semibold px-6 py-4 text-lg rounded-full"}," Sign Up Now ")])]),e("div",null,[e("div",{class:"mb-4"},[e("button",{onClick:f,class:"block w-full bg-transparent border-white border hover:bg-white hover:bg-opacity-25 text-white font-light px-6 py-4 text-lg rounded-full"}," Skip ")])])])]))}};export{F as default};
